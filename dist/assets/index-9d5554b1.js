var z={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},H=/([astvzqmhlc])([^astvzqmhlc]*)/gi,V=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function Z(r){const n=r.match(V);return n?n.map(Number):[]}function _(r){const n=[],t=String(r).trim();return t[0]!=="M"&&t[0]!=="m"||t.replace(H,(l,o,s)=>{const a=Z(s);let u=o.toLowerCase(),h=o;if(u==="m"&&a.length>2&&(n.push([h,...a.splice(0,2)]),u="l",h=h==="m"?"l":"L"),a.length<z[u])return"";for(n.push([h,...a.splice(0,z[u])]);a.length>=z[u]&&a.length&&z[u];)n.push([h,...a.splice(0,z[u])]);return""}),n}function G(r,n){const t=r.x*Math.cos(n)-r.y*Math.sin(n),l=r.y*Math.cos(n)+r.x*Math.sin(n);r.x=t,r.y=l}function U(r,n,t){r.x+=n,r.y+=t}function Q(r,n){r.x*=n,r.y*=n}var g=class L{constructor(n){this.commands=[],n&&n instanceof L?this.commands.push(...n.commands):n&&(this.commands=_(n))}addPath(n){n&&n instanceof L&&this.commands.push(...n.commands)}moveTo(n,t){this.commands.push(["M",n,t])}lineTo(n,t){this.commands.push(["L",n,t])}arc(n,t,l,o,s,a){this.commands.push(["AC",n,t,l,o,s,!!a])}arcTo(n,t,l,o,s){this.commands.push(["AT",n,t,l,o,s])}ellipse(n,t,l,o,s,a,u,h){this.commands.push(["E",n,t,l,o,s,a,u,!!h])}closePath(){this.commands.push(["Z"])}bezierCurveTo(n,t,l,o,s,a){this.commands.push(["C",n,t,l,o,s,a])}quadraticCurveTo(n,t,l,o){this.commands.push(["Q",n,t,l,o])}rect(n,t,l,o){this.commands.push(["R",n,t,l,o])}roundRect(n,t,l,o,s){typeof s>"u"?this.commands.push(["RR",n,t,l,o,0]):this.commands.push(["RR",n,t,l,o,s])}};function F(r,n){let t=0,l=0,o,s,a,u,h,i,R,q,C,A,N,S,E,f,p,w,d,b,P,I,$,m=null,k=null,y=null,T=null,v=null,M=null;r.beginPath();for(let c=0;c<n.length;++c){b=n[c][0],b!=="S"&&b!=="s"&&b!=="C"&&b!=="c"&&(m=null,k=null),b!=="T"&&b!=="t"&&b!=="Q"&&b!=="q"&&(y=null,T=null);let e;switch(b){case"m":case"M":e=n[c],b==="m"?(t+=e[1],l+=e[2]):(t=e[1],l=e[2]),(b==="M"||!v)&&(v={x:t,y:l}),r.moveTo(t,l);break;case"l":e=n[c],t+=e[1],l+=e[2],r.lineTo(t,l);break;case"L":e=n[c],t=e[1],l=e[2],r.lineTo(t,l);break;case"H":e=n[c],t=e[1],r.lineTo(t,l);break;case"h":e=n[c],t+=e[1],r.lineTo(t,l);break;case"V":e=n[c],l=e[1],r.lineTo(t,l);break;case"v":e=n[c],l+=e[1],r.lineTo(t,l);break;case"a":case"A":if(e=n[c],M===null)throw new Error("This should never happen");b==="a"?(t+=e[6],l+=e[7]):(t=e[6],l=e[7]),f=e[1],p=e[2],R=e[3]*Math.PI/180,a=!!e[4],u=!!e[5],h={x:t,y:l},i={x:(M.x-h.x)/2,y:(M.y-h.y)/2},G(i,-R),q=i.x*i.x/(f*f)+i.y*i.y/(p*p),q>1&&(q=Math.sqrt(q),f*=q,p*=q),P={x:f*i.y/p,y:-(p*i.x)/f},C=f*f*p*p,A=f*f*i.y*i.y+p*p*i.x*i.x,u!==a?Q(P,Math.sqrt((C-A)/A)||0):Q(P,-Math.sqrt((C-A)/A)||0),s=Math.atan2((i.y-P.y)/p,(i.x-P.x)/f),o=Math.atan2(-(i.y+P.y)/p,-(i.x+P.x)/f),G(P,R),U(P,(h.x+M.x)/2,(h.y+M.y)/2),r.save(),r.translate(P.x,P.y),r.rotate(R),r.scale(f,p),r.arc(0,0,1,s,o,!u),r.restore();break;case"C":e=n[c],m=e[3],k=e[4],t=e[5],l=e[6],r.bezierCurveTo(e[1],e[2],m,k,t,l);break;case"c":e=n[c],r.bezierCurveTo(e[1]+t,e[2]+l,e[3]+t,e[4]+l,e[5]+t,e[6]+l),m=e[3]+t,k=e[4]+l,t+=e[5],l+=e[6];break;case"S":e=n[c],(m===null||k===null)&&(m=t,k=l),r.bezierCurveTo(2*t-m,2*l-k,e[1],e[2],e[3],e[4]),m=e[1],k=e[2],t=e[3],l=e[4];break;case"s":e=n[c],(m===null||k===null)&&(m=t,k=l),r.bezierCurveTo(2*t-m,2*l-k,e[1]+t,e[2]+l,e[3]+t,e[4]+l),m=e[1]+t,k=e[2]+l,t+=e[3],l+=e[4];break;case"Q":e=n[c],y=e[1],T=e[2],t=e[3],l=e[4],r.quadraticCurveTo(y,T,t,l);break;case"q":e=n[c],y=e[1]+t,T=e[2]+l,t+=e[3],l+=e[4],r.quadraticCurveTo(y,T,t,l);break;case"T":e=n[c],(y===null||T===null)&&(y=t,T=l),y=2*t-y,T=2*l-T,t=e[1],l=e[2],r.quadraticCurveTo(y,T,t,l);break;case"t":e=n[c],(y===null||T===null)&&(y=t,T=l),y=2*t-y,T=2*l-T,t+=e[1],l+=e[2],r.quadraticCurveTo(y,T,t,l);break;case"z":case"Z":v&&(t=v.x,l=v.y),v=null,r.closePath();break;case"AC":e=n[c],t=e[1],l=e[2],E=e[3],s=e[4],o=e[5],I=e[6],r.arc(t,l,E,s,o,I);break;case"AT":e=n[c],N=e[1],S=e[2],t=e[3],l=e[4],E=e[5],r.arcTo(N,S,t,l,E);break;case"E":e=n[c],t=e[1],l=e[2],f=e[3],p=e[4],R=e[5],s=e[6],o=e[7],I=e[8],r.save(),r.translate(t,l),r.rotate(R),r.scale(f,p),r.arc(0,0,1,s,o,I),r.restore();break;case"R":e=n[c],t=e[1],l=e[2],w=e[3],d=e[4],v={x:t,y:l},r.rect(t,l,w,d);break;case"RR":e=n[c],t=e[1],l=e[2],w=e[3],d=e[4],$=e[5],v={x:t,y:l},r.roundRect(t,l,w,d,$);break;default:throw new Error(`Invalid path command: ${b}`)}M?(M.x=t,M.y=l):M={x:t,y:l}}}function B(r,n,t,l,o=0){if(typeof o=="number"&&(o=[o]),Array.isArray(o)){if(o.length===0||o.length>4)throw new RangeError(`Failed to execute 'roundRect' on '${this.constructor.name}': ${o.length} radii provided. Between one and four radii are necessary.`);o.forEach(R=>{if(R<0)throw new RangeError(`Failed to execute 'roundRect' on '${this.constructor.name}': Radius value ${R} is negative.`)})}else return;if(o.length===1&&o[0]===0){this.rect(r,n,t,l);return}const s=Math.min(t,l)/2,a=Math.min(s,o[0]);let u=a,h=a,i=a;o.length===2&&(u=Math.min(s,o[1]),i=u),o.length===3&&(u=Math.min(s,o[1]),i=u,h=Math.min(s,o[2])),o.length===4&&(u=Math.min(s,o[1]),h=Math.min(s,o[2]),i=Math.min(s,o[3])),this.moveTo(r,n+l-i),this.arcTo(r,n,r+a,n,a),this.arcTo(r+t,n,r+t,n+u,u),this.arcTo(r+t,n+l,r+t-h,n+l,h),this.arcTo(r,n+l,r,n+l-i,i),this.moveTo(r,n)}function j(r){if(!r)return;const n=r.prototype.fill,t=r.prototype.stroke,l=r.prototype.isPointInPath;r.prototype.fill=function(...s){if(s[0]instanceof g){const u=s[0],h=s[1]||"nonzero";return F(this,u.commands),n.apply(this,[h])}const a=s[0]||"nonzero";return n.apply(this,[a])},r.prototype.stroke=function(s){s&&F(this,s.commands),t.apply(this)},r.prototype.isPointInPath=function(...s){if(s[0]instanceof g){const a=s[0],u=s[1],h=s[2],i=s[3]||"nonzero";return F(this,a.commands),l.apply(this,[u,h,i])}return l.apply(this,s)}}function J(r){r&&!r.prototype.roundRect&&(r.prototype.roundRect=B)}function K(r){r&&!r.prototype.roundRect&&(r.prototype.roundRect=B)}export{g as Path2D,j as applyPath2DToCanvasRenderingContext,J as applyRoundRectToCanvasRenderingContext2D,K as applyRoundRectToPath2D,F as buildPath,_ as parsePath,B as roundRect};
